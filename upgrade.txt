This files describes API changes and other work in the diary code.
=== 3.5.0 ===
Diary_514 - Sort order label needs css setting. Removed all the hard coded h5's.
    There were about 21 of them, 19 in view.php and two in the language file. 
    Added classes, one for the whole table and one for some table cells.
Diary_654 - There is a request for using Atto editor in report.php for feedback.
    Have added the Atto editor so it appears on both the report.php and
    reportsingle.php pages. Still need to add file handling.
Diary_707 - link to index.php page on report.php page should be on the same line
    as the toolbar. Made code changes as needed to move the link.
Diary_711 - File report.php has hard coded tags that should be removed. Removed
    them as part of my work in CSS changes.
Diary_722 - Should move toolbar to the right like I did on the report.php page.
    Moved toolbar to the right on view.php page.
Diary_730 - Need an enablestats setting. 20210812 Created the new setting
    along with new fields, selector, strings, and code as needed.
20210812 Tested and seems to be working.
Diary_732 - Missing the Diary icon on moodle.org. 20210815 This was Diary_765
    on moodle311. 20210815 Forget what day I did it, but I changed from svg file
    to gif and the icon now shows on moodle.org.
Diary_733 - See about moving functions from mod_form to diarystats. Was Diary_764
    which I have abandoned on moodle311. 20210712 Moved function get_item_types($itemtypes).
    20210712 Moved function get_rating_options($plugin). 20210712 Moved 
    get_showhide_options($plugin).
Diary_734 - Need to convert from lib.php cron function to /classes/task/cron_task.php.
    Added tasks.php file in db folder. Added task folder in classes folder. Added
    cron_task.php file in classes/task/. The file, cron_tasks.php, still needs
    some more work.
Diary_736 - Need a way to slectively turn off autosave. It is not needed when
    starting a totally new entry.

Diary_737 - Config settings are not all named the same. Added mod_ to the four
    items that were missing it.


Diary_738 - Need activity color setting for entry's. Added new fields for the
    two colors in mdl_diary table. Made changes to the install.xml and upgrade.php
    to add two new fields, entrybgc and entrytextbgc. Updated the mod_form.php
    file to now have appearances settings for the two colors. Added code changes
    so the new settings are actually used. Added code changes to backup, which
    was tested and it worked as expected.
Diary_739 - Teacher's name is missing from reports. Added a new line break which
    moved Rating and Average of ratings down one line. Then added code to output
    the name of the last teacher to give feedback/rating. Seems to be working as
    expected.
Diary_740 - Need new DB fields for new statistics settings. Added nine new fields
    to the mdl_diary table. Have gone back and added more fields for added ratings.
Diary_742 - Need to pass diary->errorcmid to the get common errors function. Instead
    of just passing $text(cleaned plain text) and $errorcmid(actually $diary->errorcmid),
    I switched to passing $text and $diary. I found that I needed another item from
    $diary, so it is easiest just to use the whole $diary array.
Diary_743 - The mod_form.php needs updating for new settings. Added new settings
    and other bits of code as needed to implement the new settings. The list still
    needs work. It is not saving and restoring, yet.

Diary_744 - The settings.php needs updating for new settings. Added headings, strings,
    and settings as needed. STILL NEEDS WORK!

Diary_745 - Need to develop additional statistics for each diary entry. Have
    created 20 stats and now need to thoroughly test them. Still in development!
    20210718 Rewrote count_syllables function and totalsyllables. 20210719 Added
    two new class files: pluralise.php and syllables.php that greatly improve
    the syllable count accuracy.
Diary_748 - Need Diary settings for errorfullmatch, errorcasesensitive, and errorignorebreaks.
    Added fields to the xml file. Updated the upgrade.php file. Updated backup files.
    Updated the mod_form.php file.
Diary_749 - Multiple errors when, Type of countable items, is None. Added a check
    to detect and prohibit when trying to autograde with None. 
Diary_750 - V3.4.1 has three code style errors. Added the missing final blank line
    to files diarystats.php, renderer.php, and settings.php. Pushed to github.
Diary_767 - Need Journal to Diary entries migration tool - admin only! Got a
    version working with some error checking. Does need further refinement.
Diary_768 - Journal to Diary xfr needs to tag the feedback with info that it is
    a transfer entry. Created initial code version and it works as expected. Updated
    the code to fix error when the entry has no feedback in the journal as it is
    going to have some added during the transfer. 
Diary_769 - Journal to Diary xfr breaks if there are no Journal activities in the course.
    This was fixed while working on other recent tickets -767, 768. Added a new string
    for this: $string['journalmissing'] = 'Currently, there are not any Journal
    activities in this course.';
Diary_770 - report.php > results.php has hardcoded text on new buttons. Added new
    strings for both buttons. 
Diary_771 - Need a title centered at the top of the xfr new menu item. I added
    an h3 with a style to center align the new heading. Used an existing string.
Diary_772 - The item being used in the auto-rating needs to detect when NOT short,
    or you have more than required. Changed the code and now getting expected
    results.










=== 3.4.1 ===
Diary_741 - In results.php, function is_available, is duplicate of, function
    diary_available . Removed code for, function is_available.
Diary_742 - Issue#9 Possible to add entries for past date. Same fix as 743.
Diary_743 - When editdates is disabled, Save, is broken. Added code that detects
    a changed timecreated, and prevents it while automatically adding info about
    the attempted change in the entry feeback (entrycomment) area.

=== 3.4.0 ===
Diary_142 - link to index.php page on report.php page should be on the same line
    as the toolbar. Made code changes to move the link.
Diary_143 - Backup is broken, see issue #12 and #13 on github. These two issues
    were actually fixed in an earlier v3.2.x, but I forgot to close the ticket.
Diary_145 - In Moodle 3.11 - String [grade,core] is deprecated. Added branch
    check. 3.11 and above use gradenoun. 3.10 and below use grade.
Diary_148 - Recent activity in M3.11 is showing user_picture::fields() is deprecated.
    a branch check M3.11 and above use new method. M3.10 and below use old one.
Diary_728 - Need to add word and character count to the report and
    reportsingle page, entries. Added needed code and three new strings. Added
    counts to view.php page entries, also. (raw, clean, and standardized)
Diary_729 - two sets of buttons at bottom of report when everyone has at least one
    entry. Added a check for empty $user list and if empty, skip last button set.
Diary_730 - String [grade,core] is deprecated. Added a branch check for string
    compatibility in renderer.php, diary_print_feedback function, about line 209.
Diary_731 - In Moodle 3.11 user_picture::fields() is deprecated. Added a branch
    check and code to fix the deprecated item.
Diary_738 - It is possible to add entries for past dates. Added check in edit_form.php
    that prevents sending the hidden calendar/date selector to the client computer.
Diary_739 - A user can directly access edit.php via URL change when the diary is
    closed. Added code to check to see if the diary is closed, and if so, log an
    invalid access about it.

=== 3.3.0 ===
Diary_707 - link to index.php page on report.php page should be on the same
    line as the toolbar. Moved the Index link down to the same line as the
    group selector and the toolbar.
Diary_581 - Need to redo the styles.css file and remove un-used entries.
    Made changes as needed. Added a lot of comments.
Diary_711 - File report.php has hard coded tags that should be removed. Removed
    as part of CSS changes. 
Diary_712 - In Moodle 3.11 - String [grade,core] is deprecated. Added a
    branch check in results.php file about line 421.
Diary_722 - Should move toolbar to the right like I did on the report.php page.
    Used span to float it to the right. 
Diary_144 - File report.php has hard coded tags that should be removed. Removed
    tags as needed.
Diary_66 - Sort order label needs css setting. Removed hard coded css.

=== 3.2.1 ===
Diary_703 - print_error deprecated - in multiple files. Fixed in
    Multiple places.

=== 3.2.0 ===
Diary_696 - Need mode to start new entry each time you click the new
    entry button. Added code in edit.php about line 87. Added new string.
    Added code in view.php to decide what text to put on the Button.

=== 3.1.2 ===
* Fixed  CSS problems in styles.css reported by Moodle for v3.1.1.
* Modified method to show/hide date time selector for editing entry dates.

=== 3.1.1 ===
* Added new reportsingle.php that lets the teacher see all of the
    entries for a single user. Can then grade and add feedback
    to one or more of the individual entries.
* Fixed edit_form.php Edit all dates calendar selector. Use hideIf not enabled
    and using Moodle 3.4 and higher. Use disableIf not enabled and using
    Moodle 3.3 and lower.

=== 3.1.0 ===
* Fixed some code style errors in results.php and report.php.

=== 3.0.0 ===
* Diary_585 - Need capability to create an entry for a skipped day. Added
    date time selector and language string for use on edit_form.php that
    allows a user to change the date of the entry being edited.
    
=== 2.1.1 ===
* Added missing header label for sort order at top of report.php page.
* Added missing diary name header label at top of report.php page.

=== 2.1.0 ===
* Changed sql for lib.php, function diary_get_participants($diaryid).
* Changed sql for lib.php, function diary_get_users_done($diary, $currentgroup, $sortoption)
    by adding the $sortoption for the new toolbuttons on report.php page.
* Added two new sort order toolbuttons to report.php for sort lastname ascending and descending.
* Added, Edit all, setting to enable editing all entries. Disable means user can edit the
    entry for the current day only.

=== 2.0.0 ===
* Fixed backup file to include ratings.

=== 1.9.0 ===
* Fixed a temporary restore so that ratings are now being generated as expected.
* Modified travis.yml file and now getting email saying it passed.

=== 1.8.2 ===
* Added some more missing code to the backup and restore processes. Still not working as expected.
* Modified travis.yml file.

=== 1.8.1 ===
* Added missing fields to the backup and restore.
* Added function to create ratings in the restore process. Not working as expected.

=== 1.8.0 ===
* Added missing space in front of Toolbar label on report.php page.
* Moved view.php sort order and rating type heading labels up five lines in the code
    so that they are also visible when the Diary activity is closed.
* Added, Editing period has ended, message just under the heading, that is shown
    only when the activity is closed.

=== 1.7.0 ===
* Fixed toolbar in render.php. Changed from html_writer::alist to $output.
* Fixed toolbar in report.php. Changed from html_writer::alist to $output.

=== 1.6.3 ===
* Fixed incorrect greeting in emails sent to users notifying them of feedback.
* Fixed dates so they translate to language in use.

=== 1.6.2 ===
* Fixed Embedded images missing when editing an entry. (#3)
* Fixed hardcoded strings.

=== 1.6.1 ===
* Added Availability help icons to the mod_form.php.
* Set mod_form.php to hide the Days available setting unless using course weekly topic format.
* Fixed error when student trying to edit post. (#4)

=== 1.6.0 ===
* Added help icons for all three date available items.

=== 1.5.1 ===
* Fixed savepoints problem.

=== 1.5.0 ===
* Fixed perpage selector that was broken by enabling timeopen and timeclose.
* Fixed perpage count actually displayed that was off by one.
* Added total entry count right after the Entries per page selector.
* Added new string to show, out of xx entries., right after Entries per page selector.

=== 1.4.0 ===
* Added code to view.php to show all entries when timenow > timeclose.
* Code cleanup.
* Changed back to previous travis.yml

=== 1.3.0 ===
* Added availability dates to the Calendar.
* Added code so that when not using weekly format, availability dates can be used to control diary access.
* Code cleanup.

=== 1.2.0 ===
* Added user names salutation to strings used for message/emails sent to user.
* Cleanup of more code prechecks listed for 1.0.1.(10|4)
* Changed edit mode to show, Diary description instead of, Diary question.
* On the view.php page, added a link for students to index.php page.
* Added code to enable, Expect completed on, date.


=== 1.1.0 ===
* Cleanup of more code prechecks listed for 1.0.1.(21|4)
* Added link on view.php to index.php to show all Diary's in the course.
* Added link on report.php to index.php to show all Diary's in the course.

=== 1.0.1 ===
* Cleanup of most code prechecks listed for 1.0.0.

=== 1.0.0 ===
* Cleanup of code prechecks.
* Added toolbar with download, page reload, edit, and four sorts to view.php page.
* Added toolbar with download, page reload, edit, and four sorts to report.php page.
* Added page format color setting to control look of view.php and report.php pages.
* Added capability to start new entry each calendar day.
* Added Save all feedback and Return to Diary, buttons between each entry on report.php page.
* Added, Entries per page, selector on the view.php page.
* Added timecreated to use as title for each entry on the view.php page.
* Added Details listing to each entry on the view.php page.
* Added notice that an entry has not been given feedback or rated yet, for each entry on view.php page.
* Added Rating system.
* Removed hard coded text in print_errors in edit.php and report.php.
* Added an edit link/icon after the title of every entry on view.php page
