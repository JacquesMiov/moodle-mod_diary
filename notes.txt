Sometime ago, due to a forum inquirey, I started to
modify a copy of journal and create a diary module.
Eventually, I removed it from all my Moodle sites,
but have decided to work on it some more.
07/26/2018 Verified I don't have diary installed anywhere.
07/26/2018 Installed diary code to moodle35.
07/26/2018 report.php modified line 136 that used to
be a notification entry, so that it is now:
    echo $OUTPUT->notification(get_string("feedbackupdated", "journal", "$count"), "notifysuccess");
07/26/2018 Added the missing comment lines from 2 thru 15.
07/26/2018 Went through all the SQL statemnts and made sure
that all the "j's" were changed to "d's" for consistency.
07/26/2018 Converted multiple double blank lines to single ones.
05/21/2019 Verified diary is still installed in moodle35.
05/21/2019 Installed a copy into my development site, moodle3dev.
05/23/2019 Modified view.php to force the edit menu cog to show.
05/24/2019 Added timecreated field and have it working along with
the timemodified field, I think.
05/24/2019 I think part of my problem starting a new entry,
might be due to calculations being made based on GMT.
05/26/2019 Set version to 0.8Beta.
05/27/2019 Fixed file handling error in view.php so that
now audio and video files will play.
06/03/2019 Added download and refresh toolbuttons to report.php.
Also started developing toolbar for each entry that allows
the teacher to go to previous and next days, if they exist.
06/04/2019 Got renderer.php working for the activity introduction.
I also moved the diary_print_user_entry and diary_print_feedback
functions to the renderer.php file.
06/05/2019 One step forward, then two steps back. Just not making
any progress. Every time I have tried something, there is always one
step that breaks the method I am trying. Cannot seem to get past
needing $this->, or needing $OUTPUT, to try and get the entry toolbar
to work.

Had to abandon adding another renderer. Had to abandon putting all
my new stuff in lib.php and moving it to locallib.php. In there I
had to abandon using private function and just make things as function.
Even some that are in there already, (Copied from hotquestion) will
have to have the public function changed to just function.

If that is the case, then why bother having locallib.php.
Just put everything into lib.php like I had.

Finally, something WORKED! In view.php, about line143, when getting
the user diary entries, I inserted a $sort = 'timecreated DESC' and
the users entries are now listed from newest, to the oldest!

Later, should see about making a switch so the user can select the
sort order. Also select month and year, maybe.

06/06/2019 Made a change to the day check for starting a new entry.
Now using diff function.
06/07/2019 Made a change to the day check for starting a new entry.
Instead of checking for ($diff->d > 0), which is only triggered at 24
hours, I am trying ($diff->d + $diff->h) > 0.
06/07/2019 Added a third, Save all my feedback, button to the top of
the users with an entry. Checked that all three buttons do work.
06/08/2019 changed back from using diff function to one that uses floor.
Also make it so there is a Save all my feedback at the tope of the list,
below each entry, and at the bottome of the page.
Also played with the sort order of the report page, but never could get
the results I wanted. Reverted to old sort.

06/09/2019 Finally fixed edit.php so that when it is a new calendar
date, it will start a new entry, no matter how many hours have elapsed.
06/06/2019 Finally fixed the double button problem for the user entry
toolbar. Each button used $output and the function was also returning
a $output, which gave two sets of tools.
06/13/2019 Added another color setting so that the view.php has a color
for the whole background as well as another color for the text background.
I also added code in the report.php so that each entry uses one of the
two colors. Still deciding which one to use. For report, the code is
actually in lib.php, in the, function diary_print_user_entry, about line 948.

06/15/2019 Finally figured out a really simple way to get the entries list
on the report.php page to be in alphabetical order.
06/15/2019 Double whammy! GOt the list order to work and just now, I also
have gotten the download_entries to work. Still have a few bugs to work
out due to $this-> not working. Later 1800 - I have the bugs fixed. Just
need to verify things tomorrow and do some code cleanup.

06/16/2019 Made a slight change to the ORDER BY in SQL for entries list
in report.php file. Added both u.lastname ASC and u.firstname ASC. Also
had to add $sort 'lastname ASC, firstname ASC' in report.php, at about
line 185, so that the list of users with no entry, is alphabetized, too. 
Started adding icons for previous and next toolbuttons. Also added css
style for the notice that an entry has changed since the last feedback
was made. It now shows slightly larger, red, and underlined so it stands out.

06/17/2019 Fixed css style for the notice that an entry has changed since the
lst feedback was made for the view.php page. Also made it so the info is
post below each entry on the page.
06/17/2019 Fixed backup and restore so they now work, correctly.
06/18/2018 Added red warnings for needs regrade and needs grading.